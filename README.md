
# Інструкція з налаштування та запуску скрипта

Ця інструкція допоможе вам налаштувати та запустити скрипт для аналізу логів Nginx, конвертації їх у формат CSV та завантаження у Git-репозиторій.

---

## Вимоги

1. **OS Linux**
2. **Nginx log** 
3. **Git** — для роботи з репозиторіями.
4. **SSH-доступ** до вашого GitHub-репозиторію.

---

## Крок 1: Підготовка GitHub-репозиторію

1. **Створіть репозиторій на GitHub**:
   - Перейдіть на GitHub і створіть новий репозиторій (наприклад, `nginx-log-parser`).
   - Скопіюйте SSH URL репозиторія (формат: `git@github.com:<your-username>/<repo-name>.git`).
   - Також даний URL потрібно додати в скрипт 

2. **Налаштуйте SSH-доступ**:
   - Створити SSH ключ:
     ```
     ssh-keygen -t rsa -b 4096
     ```
   - Додайте ключ до GitHub:
     - Скопіюйте вміст ключа:
       ```bash
       cat ~/.ssh/id_rsa.pub
       ```
     - Приватний ключ має розміщуватись ~/.ssh/id_rsa
     - Перейдіть у **Settings → Deploy Keys** у GitHub і натисніть **New SSH key**.

3. **Перевірте підключення до GitHub через SSH**:
   ```bash
   ssh -T git@github.com
   ```
   Якщо з'явиться повідомлення: `Hi <username>! You've successfully authenticated...`, доступ налаштований.

---

## Крок 2: Завантаження скрипта

1. Створіть файл `script.sh` у вашій робочій директорії:
   ```bash
   vim script.sh
   ```
3. Зробіть файл виконуваним:
   ```bash
   chmod +x script.sh
   ```

---

## Крок 3: Підготовка лог-файлу

1. Помістіть файл `nginx.log` у ту ж директорію, що й скрипт. Якщо файл має іншу назву або шляз, змініть змінну `NGINX_LOG` у скрипті:
   ```bash
   NGINX_LOG="шлях|назва_вашого_файлу.log"
   ```
---

## Крок 4: Запуск скрипта

1. Запустіть скрипт:
   ```bash
   ./script.sh
   ```

2. Скрипт виконає такі дії:
   - Перевірить, чи існує файл логів.
   - Створить директорію `nginx_logs_repo`, якщо вона ще не існує.
   - Спарсить лог-файл Nginx у CSV-формат з колонками `IP`, `Requested URL`, `Response Code`.
   - Ініціалізує Git-репозиторій, якщо це потрібно.
   - Додасть і закомітить CSV-файл у Git.
   - Завантажить зміни у віддалений репозиторій на GitHub.

---

## Крок 5: Перевірка результатів
Після відпрацювання скрипта в репозиторії Git зявиться файл `parsed_logs.csv`.

